import{d as X,l as ve,e as Ke,f as Xe,h as Je}from"./chunk-be86a8d1.js";const Qe="form textarea+button",Ye="form textarea",me=".items-start:not(.scrollbar-trigger)",ge="main div.group",ye="chat-gpt-wizard",be="chat-gpt-wizard--shadow-root",Ee="chat-gpt-wizard--description";function k(){return document.querySelector('div[id="__next"]')}function Ze(){return k().querySelector("."+be)}function ke(){return k().querySelector("."+ye)}function et(){return k().querySelector("."+Ee)}function Se(){return k().querySelector(Qe)}function w(){return k().querySelector(Ye)}function xe(){return[...k().querySelectorAll(ge)]}var tt=`.chat-gpt-wizard--select-wrapper{text-align:center}.chat-gpt-wizard--select-wrapper select{border-radius:.375rem;padding:.5rem 2.5rem .5rem .75rem;height:3rem;background-color:transparent}
`;const C="\u200F\u200F\u200E \u200E";function nt(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=document.createElement("style");return n.textContent=tt,t.append(n),e}function _t(e,t,n,_){const i=new RegExp(t+".*?"+n,"gs");return e.replace(i,_)}var q,p,we,S,ee,$e,V,W={},Ce=[],rt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function E(e,t){for(var n in t)e[n]=t[n];return e}function Pe(e){var t=e.parentNode;t&&t.removeChild(e)}function Te(e,t,n){var _,i,r,c={};for(r in t)r=="key"?_=t[r]:r=="ref"?i=t[r]:c[r]=t[r];if(arguments.length>2&&(c.children=arguments.length>3?q.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)c[r]===void 0&&(c[r]=e.defaultProps[r]);return M(e,c,_,i,null)}function M(e,t,n,_,i){var r={type:e,props:t,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++we:i};return i==null&&p.vnode!=null&&p.vnode(r),r}function F(e){return e.children}function R(e,t){this.props=e,this.context=t}function T(e,t){if(t==null)return e.__?T(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?T(e):null}function Le(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Le(e)}}function te(e){(!e.__d&&(e.__d=!0)&&S.push(e)&&!z.__r++||ee!==p.debounceRendering)&&((ee=p.debounceRendering)||$e)(z)}function z(){var e,t,n,_,i,r,c,u;for(S.sort(V);e=S.shift();)e.__d&&(t=S.length,_=void 0,i=void 0,c=(r=(n=e).__v).__e,(u=n.__P)&&(_=[],(i=E({},r)).__v=r.__v+1,J(u,r,i,n.__n,u.ownerSVGElement!==void 0,r.__h!=null?[c]:null,_,c==null?T(r):c,r.__h),Re(_,r),r.__e!=c&&Le(r)),S.length>t&&S.sort(V));z.__r=0}function He(e,t,n,_,i,r,c,u,a,d){var o,f,s,l,h,x,v,g=_&&_.__k||Ce,b=g.length;for(n.__k=[],o=0;o<t.length;o++)if((l=n.__k[o]=(l=t[o])==null||typeof l=="boolean"||typeof l=="function"?null:typeof l=="string"||typeof l=="number"||typeof l=="bigint"?M(null,l,null,null,l):Array.isArray(l)?M(F,{children:l},null,null,null):l.__b>0?M(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l)!=null){if(l.__=n,l.__b=n.__b+1,(s=g[o])===null||s&&l.key==s.key&&l.type===s.type)g[o]=void 0;else for(f=0;f<b;f++){if((s=g[f])&&l.key==s.key&&l.type===s.type){g[f]=void 0;break}s=null}J(e,l,s=s||W,i,r,c,u,a,d),h=l.__e,(f=l.ref)&&s.ref!=f&&(v||(v=[]),s.ref&&v.push(s.ref,null,l),v.push(f,l.__c||h,l)),h!=null?(x==null&&(x=h),typeof l.type=="function"&&l.__k===s.__k?l.__d=a=Ae(l,a,e):a=Ne(e,l,s,g,h,a),typeof n.type=="function"&&(n.__d=a)):a&&s.__e==a&&a.parentNode!=e&&(a=T(s))}for(n.__e=x,o=b;o--;)g[o]!=null&&(typeof n.type=="function"&&g[o].__e!=null&&g[o].__e==n.__d&&(n.__d=Me(_).nextSibling),Ue(g[o],g[o]));if(v)for(o=0;o<v.length;o++)Ie(v[o],v[++o],v[++o])}function Ae(e,t,n){for(var _,i=e.__k,r=0;i&&r<i.length;r++)(_=i[r])&&(_.__=e,t=typeof _.type=="function"?Ae(_,t,n):Ne(n,_,_,i,_.__e,t));return t}function Ne(e,t,n,_,i,r){var c,u,a;if(t.__d!==void 0)c=t.__d,t.__d=void 0;else if(n==null||i!=r||i.parentNode==null)e:if(r==null||r.parentNode!==e)e.appendChild(i),c=null;else{for(u=r,a=0;(u=u.nextSibling)&&a<_.length;a+=1)if(u==i)break e;e.insertBefore(i,r),c=r}return c!==void 0?c:i.nextSibling}function Me(e){var t,n,_;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(_=Me(n)))return _}return null}function ot(e,t,n,_,i){var r;for(r in n)r==="children"||r==="key"||r in t||D(e,r,null,n[r],_);for(r in t)i&&typeof t[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||n[r]===t[r]||D(e,r,t[r],n[r],_)}function ne(e,t,n){t[0]==="-"?e.setProperty(t,n==null?"":n):e[t]=n==null?"":typeof n!="number"||rt.test(t)?n:n+"px"}function D(e,t,n,_,i){var r;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof _=="string"&&(e.style.cssText=_=""),_)for(t in _)n&&t in n||ne(e.style,t,"");if(n)for(t in n)_&&n[t]===_[t]||ne(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?_||e.addEventListener(t,r?re:_e,r):e.removeEventListener(t,r?re:_e,r);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n==null?"":n;break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function _e(e){return this.l[e.type+!1](p.event?p.event(e):e)}function re(e){return this.l[e.type+!0](p.event?p.event(e):e)}function J(e,t,n,_,i,r,c,u,a){var d,o,f,s,l,h,x,v,g,b,L,$,Z,H,A,y=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(a=n.__h,u=t.__e=n.__e,t.__h=null,r=[u]),(d=p.__b)&&d(t);try{e:if(typeof y=="function"){if(v=t.props,g=(d=y.contextType)&&_[d.__c],b=d?g?g.props.value:d.__:_,n.__c?x=(o=t.__c=n.__c).__=o.__E:("prototype"in y&&y.prototype.render?t.__c=o=new y(v,b):(t.__c=o=new R(v,b),o.constructor=y,o.render=ct),g&&g.sub(o),o.props=v,o.state||(o.state={}),o.context=b,o.__n=_,f=o.__d=!0,o.__h=[],o._sb=[]),o.__s==null&&(o.__s=o.state),y.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=E({},o.__s)),E(o.__s,y.getDerivedStateFromProps(v,o.__s))),s=o.props,l=o.state,o.__v=t,f)y.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(y.getDerivedStateFromProps==null&&v!==s&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(v,b),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(v,o.__s,b)===!1||t.__v===n.__v){for(t.__v!==n.__v&&(o.props=v,o.state=o.__s,o.__d=!1),o.__e=!1,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(N){N&&(N.__=t)}),L=0;L<o._sb.length;L++)o.__h.push(o._sb[L]);o._sb=[],o.__h.length&&c.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(v,o.__s,b),o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(s,l,h)})}if(o.context=b,o.props=v,o.__P=e,$=p.__r,Z=0,"prototype"in y&&y.prototype.render){for(o.state=o.__s,o.__d=!1,$&&$(t),d=o.render(o.props,o.state,o.context),H=0;H<o._sb.length;H++)o.__h.push(o._sb[H]);o._sb=[]}else do o.__d=!1,$&&$(t),d=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++Z<25);o.state=o.__s,o.getChildContext!=null&&(_=E(E({},_),o.getChildContext())),f||o.getSnapshotBeforeUpdate==null||(h=o.getSnapshotBeforeUpdate(s,l)),A=d!=null&&d.type===F&&d.key==null?d.props.children:d,He(e,Array.isArray(A)?A:[A],t,n,_,i,r,c,u,a),o.base=t.__e,t.__h=null,o.__h.length&&c.push(o),x&&(o.__E=o.__=null),o.__e=!1}else r==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=it(n.__e,t,n,_,i,r,c,a);(d=p.diffed)&&d(t)}catch(N){t.__v=null,(a||r!=null)&&(t.__e=u,t.__h=!!a,r[r.indexOf(u)]=null),p.__e(N,t,n)}}function Re(e,t){p.__c&&p.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(_){_.call(n)})}catch(_){p.__e(_,n.__v)}})}function it(e,t,n,_,i,r,c,u){var a,d,o,f=n.props,s=t.props,l=t.type,h=0;if(l==="svg"&&(i=!0),r!=null){for(;h<r.length;h++)if((a=r[h])&&"setAttribute"in a==!!l&&(l?a.localName===l:a.nodeType===3)){e=a,r[h]=null;break}}if(e==null){if(l===null)return document.createTextNode(s);e=i?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l,s.is&&s),r=null,u=!1}if(l===null)f===s||u&&e.data===s||(e.data=s);else{if(r=r&&q.call(e.childNodes),d=(f=n.props||W).dangerouslySetInnerHTML,o=s.dangerouslySetInnerHTML,!u){if(r!=null)for(f={},h=0;h<e.attributes.length;h++)f[e.attributes[h].name]=e.attributes[h].value;(o||d)&&(o&&(d&&o.__html==d.__html||o.__html===e.innerHTML)||(e.innerHTML=o&&o.__html||""))}if(ot(e,s,f,i,u),o)t.__k=[];else if(h=t.props.children,He(e,Array.isArray(h)?h:[h],t,n,_,i&&l!=="foreignObject",r,c,r?r[0]:n.__k&&T(n,0),u),r!=null)for(h=r.length;h--;)r[h]!=null&&Pe(r[h]);u||("value"in s&&(h=s.value)!==void 0&&(h!==e.value||l==="progress"&&!h||l==="option"&&h!==f.value)&&D(e,"value",h,f.value,!1),"checked"in s&&(h=s.checked)!==void 0&&h!==e.checked&&D(e,"checked",h,f.checked,!1))}return e}function Ie(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(_){p.__e(_,n)}}function Ue(e,t,n){var _,i;if(p.unmount&&p.unmount(e),(_=e.ref)&&(_.current&&_.current!==e.__e||Ie(_,null,t)),(_=e.__c)!=null){if(_.componentWillUnmount)try{_.componentWillUnmount()}catch(r){p.__e(r,t)}_.base=_.__P=null,e.__c=void 0}if(_=e.__k)for(i=0;i<_.length;i++)_[i]&&Ue(_[i],t,n||typeof e.type!="function");n||e.__e==null||Pe(e.__e),e.__=e.__e=e.__d=void 0}function ct(e,t,n){return this.constructor(e,n)}function st(e,t,n){var _,i,r;p.__&&p.__(e,t),i=(_=typeof n=="function")?null:n&&n.__k||t.__k,r=[],J(t,e=(!_&&n||t).__k=Te(F,null,[e]),i||W,W,t.ownerSVGElement!==void 0,!_&&n?[n]:i?null:t.firstChild?q.call(t.childNodes):null,r,!_&&n?n:i?i.__e:t.firstChild,_),Re(r,e)}q=Ce.slice,p={__e:function(e,t,n,_){for(var i,r,c;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(e)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,_||{}),c=i.__d),c)return i.__E=i}catch(u){e=u}throw e}},we=0,R.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof e=="function"&&(e=e(E({},n),this.props)),e&&E(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),te(this))},R.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),te(this))},R.prototype.render=F,S=[],$e=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,V=function(e,t){return e.__v.__b-t.__v.__b},z.__r=0;var Oe=function(e,t,n,_){var i;t[0]=0;for(var r=1;r<t.length;r++){var c=t[r++],u=t[r]?(t[0]|=c?1:2,n[t[r++]]):t[++r];c===3?_[0]=u:c===4?_[1]=Object.assign(_[1]||{},u):c===5?(_[1]=_[1]||{})[t[++r]]=u:c===6?_[1][t[++r]]+=u+"":c?(i=e.apply(u,Oe(e,u,n,["",null])),_.push(i),u[0]?t[0]|=2:(t[r-2]=0,t[r]=i)):_.push(u)}return _},oe=new Map;function lt(e){var t=oe.get(this);return t||(t=new Map,oe.set(this,t)),(t=Oe(this,t.get(e)||(t.set(e,t=function(n){for(var _,i,r=1,c="",u="",a=[0],d=function(s){r===1&&(s||(c=c.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,s,c):r===3&&(s||c)?(a.push(3,s,c),r=2):r===2&&c==="..."&&s?a.push(4,s,0):r===2&&c&&!s?a.push(5,0,!0,c):r>=5&&((c||!s&&r===5)&&(a.push(r,0,c,i),r=6),s&&(a.push(r,s,0,i),r=6)),c=""},o=0;o<n.length;o++){o&&(r===1&&d(),d(o));for(var f=0;f<n[o].length;f++)_=n[o][f],r===1?_==="<"?(d(),a=[a],r=3):c+=_:r===4?c==="--"&&_===">"?(r=1,c=""):c=_+c[0]:u?_===u?u="":c+=_:_==='"'||_==="'"?u=_:_===">"?(d(),r=1):r&&(_==="="?(r=5,i=c,c=""):_==="/"&&(r<5||n[o][f+1]===">")?(d(),r===3&&(a=a[0]),r=a,(a=a[0]).push(2,0,r),r=0):_===" "||_==="	"||_===`
`||_==="\r"?(d(),r=2):c+=_),r===3&&c==="!--"&&(r=4,a=a[0])}return d(),a}(e)),t),arguments,[])).length>1?t:t[0]}var I=lt.bind(Te),Q,m,B,ie,j=0,We=[],U=[],ce=p.__b,se=p.__r,le=p.diffed,ae=p.__c,ue=p.unmount;function ze(e,t){p.__h&&p.__h(m,e,j||t),j=0;var n=m.__H||(m.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:U}),n.__[e]}function G(e){return j=1,at(De,e)}function at(e,t,n){var _=ze(Q++,2);if(_.t=e,!_.__c&&(_.__=[n?n(t):De(void 0,t),function(u){var a=_.__N?_.__N[0]:_.__[0],d=_.t(a,u);a!==d&&(_.__N=[d,_.__[1]],_.__c.setState({}))}],_.__c=m,!m.u)){var i=function(u,a,d){if(!_.__c.__H)return!0;var o=_.__c.__H.__.filter(function(s){return s.__c});if(o.every(function(s){return!s.__N}))return!r||r.call(this,u,a,d);var f=!1;return o.forEach(function(s){if(s.__N){var l=s.__[0];s.__=s.__N,s.__N=void 0,l!==s.__[0]&&(f=!0)}}),!(!f&&_.__c.props===u)&&(!r||r.call(this,u,a,d))};m.u=!0;var r=m.shouldComponentUpdate,c=m.componentWillUpdate;m.componentWillUpdate=function(u,a,d){if(this.__e){var o=r;r=void 0,i(u,a,d),r=o}c&&c.call(this,u,a,d)},m.shouldComponentUpdate=i}return _.__N||_.__}function fe(e,t){var n=ze(Q++,3);!p.__s&&dt(n.__H,t)&&(n.__=e,n.i=t,m.__H.__h.push(n))}function ut(){for(var e;e=We.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(O),e.__H.__h.forEach(K),e.__H.__h=[]}catch(t){e.__H.__h=[],p.__e(t,e.__v)}}p.__b=function(e){m=null,ce&&ce(e)},p.__r=function(e){se&&se(e),Q=0;var t=(m=e.__c).__H;t&&(B===m?(t.__h=[],m.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=U,n.__N=n.i=void 0})):(t.__h.forEach(O),t.__h.forEach(K),t.__h=[])),B=m},p.diffed=function(e){le&&le(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(We.push(t)!==1&&ie===p.requestAnimationFrame||((ie=p.requestAnimationFrame)||ft)(ut)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==U&&(n.__=n.__V),n.i=void 0,n.__V=U})),B=m=null},p.__c=function(e,t){t.some(function(n){try{n.__h.forEach(O),n.__h=n.__h.filter(function(_){return!_.__||K(_)})}catch(_){t.some(function(i){i.__h&&(i.__h=[])}),t=[],p.__e(_,n.__v)}}),ae&&ae(e,t)},p.unmount=function(e){ue&&ue(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(_){try{O(_)}catch(i){t=i}}),n.__H=void 0,t&&p.__e(t,n.__v))};var de=typeof requestAnimationFrame=="function";function ft(e){var t,n=function(){clearTimeout(_),de&&cancelAnimationFrame(t),setTimeout(e)},_=setTimeout(n,100);de&&(t=requestAnimationFrame(n))}function O(e){var t=m,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),m=t}function K(e){var t=m;e.__c=e.__(),m=t}function dt(e,t){return!e||e.length!==t.length||t.some(function(n,_){return n!==e[_]})}function De(e,t){return typeof t=="function"?t(e):t}function pt({onChange:e}){const[t,n]=G([]),[_,i]=G(),[r,c]=G(),u=()=>{Xe().then(o=>{n(o)})};return fe(()=>{u(),X().then(f=>{i(f)});const o=ve.changeStream.subscribe(c);return()=>o.unsubscribe()},[]),fe(()=>{var o,f;if((o=r==null?void 0:r.selectedPromptId)!=null&&o.newValue){const s=t==null?void 0:t.find(({id:l})=>{var h;return l===((h=r==null?void 0:r.selectedPromptId)==null?void 0:h.newValue)});i(s)}(f=r==null?void 0:r.prompts)!=null&&f.newValue&&u()},[r]),I`
    <div class="chat-gpt-wizard--select-wrapper">
      <div
        class="chat-gpt-wizard--select-label text-xs text-gray-700 dark:text-gray-500"
      >
        Select prompt
      </div>
      <select onChange=${o=>{const f=t.find(({id:s})=>{var l;return s===((l=o==null?void 0:o.target)==null?void 0:l.value)});Ke(f==null?void 0:f.id).then(()=>{}),i(f),e(f)}} class=${"chat-gpt-wizard--select cursor-default rounded-md border border-black/10 bg-white text-left focus:border-green-600 focus:outline-none focus:ring-1 focus:ring-green-600 dark:border-white/20 dark:bg-gray-800 sm:text-sm"}>
        <option value="" selected=${!(_!=null&&_.id)&&"selected"}></option>
        ${t.map(({name:o,id:f})=>I` <option
            value="${f}"
            selected=${(_==null?void 0:_.id)===f&&"selected"}
          >
            ${o}
          </option>`)}
      </select>
      ${(_==null?void 0:_.instructions)&&I`
        <div
          class="chat-gpt-wizard--select-instructions text-xs text-black/50 dark:text-white/50"
        >
          ${_.instructions}
        </div>
      `}
    </div>
  `}const ht=e=>{const t=/\[ignore:(.*?)\]/,n=e.match(t);return n&&n[1]},qe=e=>{var _;const t=(_=e==null?void 0:e.innerHTML)==null?void 0:_.includes(C),n=ht(e==null?void 0:e.innerHTML);!e.dataset.chatGptWizard&&t&&n&&(e.dataset.chatGptWizard="true",e.innerHTML=_t(e.innerHTML,C,C,""),Je(n).then(i=>{mt({prompt:i})}))},Fe=e=>{e.querySelectorAll(me).forEach(t=>{qe(t)})};function vt(){if(ke())return;const t=w().parentElement.parentElement;if(!Ze()){const i=nt();i.classList.add(be),t.appendChild(i)}let n=document.createElement("div");n.classList.add(ye);const _=document.querySelector("form");_.parentElement.insertBefore(n,_.parentElement.firstChild),st(I`<${pt} onChange=${Be} />`,n)}function Be(e){const t=w();!t||(t.placeholder=(e==null?void 0:e.placeholder)||"Send a message...")}function mt({prompt:e}={}){Ve();const t=w();if(t&&e){const n=t.parentElement.parentElement;let _=document.createElement("div");_.classList.add(Ee,"text-center","text-xs","text-black/50","dark:text-white/50"),n.insertBefore(_,n.lastElementChild.nextSibling),_.innerText="ChatGptWizard prompt: "+e.name,Be(e)}}function Ge(){const e=ke();e&&e.remove()}function Ve(){const e=et();e&&e.remove()}let pe,he,P;X().then(e=>{P=e});ve.changeStream.subscribe(({selectedPromptId:e})=>{e&&X().then(t=>{P=t})});function je(){const e=w(),t=xe();if(Ge(),!e||!P||t.length>0)return;const n=e.value,_=P.prompt;e.value=_?`${C}[ignore:${P.id}]
${_}${C}${n}`:n}function gt(e){if(pe===e)return;function t(n){n.key==="Enter"&&!n.shiftKey&&je()}e.addEventListener("keydown",t,!0),pe=e}function yt(e){if(he===e)return;function t(n){je()}e.addEventListener("click",t,!0),he=e}console.info("ChatGPT Prompt Wizard loaded");const bt=()=>{const e=Se(),t=w();!e||!t||(yt(e),gt(t))};function Y(){const e=Se(),t=w(),n=xe();if(Fe(k()),n.length>0){Ge();return}bt(),e&&t&&(Ve(),vt())}Y();const Et=k(),kt=document.querySelector("form");console.log("form",kt);try{new MutationObserver(e=>{console.log("MutationObserver1"),Y();for(const t of e)t.type==="childList"&&Array.from(t.addedNodes).forEach(_=>{_.matches&&_.matches(ge)&&Fe(_),_.matches&&_.matches(me)&&qe(_)})}).observe(Et,{childList:!0,subtree:!0})}catch(e){console.info(`ChatGptWizard error --> Could not update UI:
`,e.stack)}window.addEventListener("hashchange",function(e){console.log("MutationObserver3"),Y()});
