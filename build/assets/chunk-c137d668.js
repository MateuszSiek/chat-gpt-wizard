import{b as Me,l as Ue,c as Re,s as We}from"./chunk-cafb85b3.js";const pe="form textarea+button",ze="form textarea",De=".chat-gpt-wizard",Y=".items-start:not(.scrollbar-trigger)";function D(){return document.querySelector('div[id="__next"]')}function Oe(){return D().querySelector(De)}function Be(){return D().querySelector(pe)}function de(){return D().querySelector(ze)}var Fe=`.chat-gpt-wizard--select-wrapper{position:absolute;top:0;width:100%;display:flex;transform:translateY(calc(-4px - 100%));justify-content:space-between}.chat-gpt-wizard--select-wrapper select{border-radius:.375rem;padding:.5rem 2.5rem .5rem .75rem}.dark .chat-gpt-wizard--select-wrapper select{background-color:#40414f;border-color:#20212380}.light .chat-gpt-wizard--select-wrapper select{border-color:#0000001a}
`;const C="\u200F\u200F\u200E \u200E";function Ie(){const t=document.createElement("div"),e=t.attachShadow({mode:"open"}),n=document.createElement("style");return n.textContent=Fe,e.append(n),t}function qe(t,e,n,_){const c=new RegExp(e+".*?"+n,"gs");return t.replace(c,_)}function he(t){const e=de();if(!e)return;const n=e.value,_=t();console.log("PROMPT!!!!",_),e.value=_?C+_+C+n:n}function Ge(t,e){const n=t.onkeydown;function _(c){c.key==="Enter"&&(console.log("Code to execute before the original keydown event"),he(e)),n&&n.call(t,c)}t.onkeydown=_,t.dataset.chatGptWizard="true",console.log("Textarea hijacked",t)}function je(t,e){const n=t.onclick;function _(c){console.log("Code to execute before the original onclick event"),he(e),n&&n.call(t,c)}t.onclick=_,t.dataset.chatGptWizard="true",console.log("Button hijacked",t)}var O,f,ve,w,J,me,I,R={},ye=[],Ve=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function E(t,e){for(var n in e)t[n]=e[n];return t}function ge(t){var e=t.parentNode;e&&e.removeChild(t)}function be(t,e,n){var _,c,o,l={};for(o in e)o=="key"?_=e[o]:o=="ref"?c=e[o]:l[o]=e[o];if(arguments.length>2&&(l.children=arguments.length>3?O.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)l[o]===void 0&&(l[o]=t.defaultProps[o]);return A(t,l,_,c,null)}function A(t,e,n,_,c){var o={type:t,props:e,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:c==null?++ve:c};return c==null&&f.vnode!=null&&f.vnode(o),o}function B(t){return t.children}function L(t,e){this.props=t,this.context=e}function T(t,e){if(e==null)return t.__?T(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?T(t):null}function ke(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return ke(t)}}function Q(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!W.__r++||J!==f.debounceRendering)&&((J=f.debounceRendering)||me)(W)}function W(){var t,e,n,_,c,o,l,u;for(w.sort(I);t=w.shift();)t.__d&&(e=w.length,_=void 0,c=void 0,l=(o=(n=t).__v).__e,(u=n.__P)&&(_=[],(c=E({},o)).__v=o.__v+1,V(u,o,c,n.__n,u.ownerSVGElement!==void 0,o.__h!=null?[l]:null,_,l==null?T(o):l,o.__h),Ce(_,o),o.__e!=l&&ke(o)),w.length>e&&w.sort(I));W.__r=0}function Ee(t,e,n,_,c,o,l,u,a,p){var r,h,i,s,d,x,v,y=_&&_.__k||ye,b=y.length;for(n.__k=[],r=0;r<e.length;r++)if((s=n.__k[r]=(s=e[r])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"?A(null,s,null,null,s):Array.isArray(s)?A(B,{children:s},null,null,null):s.__b>0?A(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null){if(s.__=n,s.__b=n.__b+1,(i=y[r])===null||i&&s.key==i.key&&s.type===i.type)y[r]=void 0;else for(h=0;h<b;h++){if((i=y[h])&&s.key==i.key&&s.type===i.type){y[h]=void 0;break}i=null}V(t,s,i=i||R,c,o,l,u,a,p),d=s.__e,(h=s.ref)&&i.ref!=h&&(v||(v=[]),i.ref&&v.push(i.ref,null,s),v.push(h,s.__c||d,s)),d!=null?(x==null&&(x=d),typeof s.type=="function"&&s.__k===i.__k?s.__d=a=we(s,a,t):a=xe(t,s,i,y,d,a),typeof n.type=="function"&&(n.__d=a)):a&&i.__e==a&&a.parentNode!=t&&(a=T(i))}for(n.__e=x,r=b;r--;)y[r]!=null&&(typeof n.type=="function"&&y[r].__e!=null&&y[r].__e==n.__d&&(n.__d=Se(_).nextSibling),$e(y[r],y[r]));if(v)for(r=0;r<v.length;r++)Te(v[r],v[++r],v[++r])}function we(t,e,n){for(var _,c=t.__k,o=0;c&&o<c.length;o++)(_=c[o])&&(_.__=t,e=typeof _.type=="function"?we(_,e,n):xe(n,_,_,c,_.__e,e));return e}function xe(t,e,n,_,c,o){var l,u,a;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(n==null||c!=o||c.parentNode==null)e:if(o==null||o.parentNode!==t)t.appendChild(c),l=null;else{for(u=o,a=0;(u=u.nextSibling)&&a<_.length;a+=1)if(u==c)break e;t.insertBefore(c,o),l=o}return l!==void 0?l:c.nextSibling}function Se(t){var e,n,_;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(_=Se(n)))return _}return null}function Ke(t,e,n,_,c){var o;for(o in n)o==="children"||o==="key"||o in e||z(t,o,null,n[o],_);for(o in e)c&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||n[o]===e[o]||z(t,o,e[o],n[o],_)}function Z(t,e,n){e[0]==="-"?t.setProperty(e,n==null?"":n):t[e]=n==null?"":typeof n!="number"||Ve.test(e)?n:n+"px"}function z(t,e,n,_,c){var o;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof _=="string"&&(t.style.cssText=_=""),_)for(e in _)n&&e in n||Z(t.style,e,"");if(n)for(e in n)_&&n[e]===_[e]||Z(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?_||t.addEventListener(e,o?te:ee,o):t.removeEventListener(e,o?te:ee,o);else if(e!=="dangerouslySetInnerHTML"){if(c)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function ee(t){return this.l[t.type+!1](f.event?f.event(t):t)}function te(t){return this.l[t.type+!0](f.event?f.event(t):t)}function V(t,e,n,_,c,o,l,u,a){var p,r,h,i,s,d,x,v,y,b,$,S,X,P,H,g=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(a=n.__h,u=e.__e=n.__e,e.__h=null,o=[u]),(p=f.__b)&&p(e);try{e:if(typeof g=="function"){if(v=e.props,y=(p=g.contextType)&&_[p.__c],b=p?y?y.props.value:p.__:_,n.__c?x=(r=e.__c=n.__c).__=r.__E:("prototype"in g&&g.prototype.render?e.__c=r=new g(v,b):(e.__c=r=new L(v,b),r.constructor=g,r.render=Ye),y&&y.sub(r),r.props=v,r.state||(r.state={}),r.context=b,r.__n=_,h=r.__d=!0,r.__h=[],r._sb=[]),r.__s==null&&(r.__s=r.state),g.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=E({},r.__s)),E(r.__s,g.getDerivedStateFromProps(v,r.__s))),i=r.props,s=r.state,r.__v=e,h)g.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(g.getDerivedStateFromProps==null&&v!==i&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(v,b),!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(v,r.__s,b)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(r.props=v,r.state=r.__s,r.__d=!1),r.__e=!1,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(N){N&&(N.__=e)}),$=0;$<r._sb.length;$++)r.__h.push(r._sb[$]);r._sb=[],r.__h.length&&l.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(v,r.__s,b),r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(i,s,d)})}if(r.context=b,r.props=v,r.__P=t,S=f.__r,X=0,"prototype"in g&&g.prototype.render){for(r.state=r.__s,r.__d=!1,S&&S(e),p=r.render(r.props,r.state,r.context),P=0;P<r._sb.length;P++)r.__h.push(r._sb[P]);r._sb=[]}else do r.__d=!1,S&&S(e),p=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++X<25);r.state=r.__s,r.getChildContext!=null&&(_=E(E({},_),r.getChildContext())),h||r.getSnapshotBeforeUpdate==null||(d=r.getSnapshotBeforeUpdate(i,s)),H=p!=null&&p.type===B&&p.key==null?p.props.children:p,Ee(t,Array.isArray(H)?H:[H],e,n,_,c,o,l,u,a),r.base=e.__e,e.__h=null,r.__h.length&&l.push(r),x&&(r.__E=r.__=null),r.__e=!1}else o==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Xe(n.__e,e,n,_,c,o,l,a);(p=f.diffed)&&p(e)}catch(N){e.__v=null,(a||o!=null)&&(e.__e=u,e.__h=!!a,o[o.indexOf(u)]=null),f.__e(N,e,n)}}function Ce(t,e){f.__c&&f.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(_){_.call(n)})}catch(_){f.__e(_,n.__v)}})}function Xe(t,e,n,_,c,o,l,u){var a,p,r,h=n.props,i=e.props,s=e.type,d=0;if(s==="svg"&&(c=!0),o!=null){for(;d<o.length;d++)if((a=o[d])&&"setAttribute"in a==!!s&&(s?a.localName===s:a.nodeType===3)){t=a,o[d]=null;break}}if(t==null){if(s===null)return document.createTextNode(i);t=c?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s,i.is&&i),o=null,u=!1}if(s===null)h===i||u&&t.data===i||(t.data=i);else{if(o=o&&O.call(t.childNodes),p=(h=n.props||R).dangerouslySetInnerHTML,r=i.dangerouslySetInnerHTML,!u){if(o!=null)for(h={},d=0;d<t.attributes.length;d++)h[t.attributes[d].name]=t.attributes[d].value;(r||p)&&(r&&(p&&r.__html==p.__html||r.__html===t.innerHTML)||(t.innerHTML=r&&r.__html||""))}if(Ke(t,i,h,c,u),r)e.__k=[];else if(d=e.props.children,Ee(t,Array.isArray(d)?d:[d],e,n,_,c&&s!=="foreignObject",o,l,o?o[0]:n.__k&&T(n,0),u),o!=null)for(d=o.length;d--;)o[d]!=null&&ge(o[d]);u||("value"in i&&(d=i.value)!==void 0&&(d!==t.value||s==="progress"&&!d||s==="option"&&d!==h.value)&&z(t,"value",d,h.value,!1),"checked"in i&&(d=i.checked)!==void 0&&d!==t.checked&&z(t,"checked",d,h.checked,!1))}return t}function Te(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(_){f.__e(_,n)}}function $e(t,e,n){var _,c;if(f.unmount&&f.unmount(t),(_=t.ref)&&(_.current&&_.current!==t.__e||Te(_,null,e)),(_=t.__c)!=null){if(_.componentWillUnmount)try{_.componentWillUnmount()}catch(o){f.__e(o,e)}_.base=_.__P=null,t.__c=void 0}if(_=t.__k)for(c=0;c<_.length;c++)_[c]&&$e(_[c],e,n||typeof t.type!="function");n||t.__e==null||ge(t.__e),t.__=t.__e=t.__d=void 0}function Ye(t,e,n){return this.constructor(t,n)}function Je(t,e,n){var _,c,o;f.__&&f.__(t,e),c=(_=typeof n=="function")?null:n&&n.__k||e.__k,o=[],V(e,t=(!_&&n||e).__k=be(B,null,[t]),c||R,R,e.ownerSVGElement!==void 0,!_&&n?[n]:c?null:e.firstChild?O.call(e.childNodes):null,o,!_&&n?n:c?c.__e:e.firstChild,_),Ce(o,t)}O=ye.slice,f={__e:function(t,e,n,_){for(var c,o,l;e=e.__;)if((c=e.__c)&&!c.__)try{if((o=c.constructor)&&o.getDerivedStateFromError!=null&&(c.setState(o.getDerivedStateFromError(t)),l=c.__d),c.componentDidCatch!=null&&(c.componentDidCatch(t,_||{}),l=c.__d),l)return c.__E=c}catch(u){t=u}throw t}},ve=0,L.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Q(this))},L.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Q(this))},L.prototype.render=B,w=[],me=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,I=function(t,e){return t.__v.__b-e.__v.__b},W.__r=0;var Pe=function(t,e,n,_){var c;e[0]=0;for(var o=1;o<e.length;o++){var l=e[o++],u=e[o]?(e[0]|=l?1:2,n[e[o++]]):e[++o];l===3?_[0]=u:l===4?_[1]=Object.assign(_[1]||{},u):l===5?(_[1]=_[1]||{})[e[++o]]=u:l===6?_[1][e[++o]]+=u+"":l?(c=t.apply(u,Pe(t,u,n,["",null])),_.push(c),u[0]?e[0]|=2:(e[o-2]=0,e[o]=c)):_.push(u)}return _},ne=new Map;function Qe(t){var e=ne.get(this);return e||(e=new Map,ne.set(this,e)),(e=Pe(this,e.get(t)||(e.set(t,e=function(n){for(var _,c,o=1,l="",u="",a=[0],p=function(i){o===1&&(i||(l=l.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,i,l):o===3&&(i||l)?(a.push(3,i,l),o=2):o===2&&l==="..."&&i?a.push(4,i,0):o===2&&l&&!i?a.push(5,0,!0,l):o>=5&&((l||!i&&o===5)&&(a.push(o,0,l,c),o=6),i&&(a.push(o,i,0,c),o=6)),l=""},r=0;r<n.length;r++){r&&(o===1&&p(),p(r));for(var h=0;h<n[r].length;h++)_=n[r][h],o===1?_==="<"?(p(),a=[a],o=3):l+=_:o===4?l==="--"&&_===">"?(o=1,l=""):l=_+l[0]:u?_===u?u="":l+=_:_==='"'||_==="'"?u=_:_===">"?(p(),o=1):o&&(_==="="?(o=5,c=l,l=""):_==="/"&&(o<5||n[r][h+1]===">")?(p(),o===3&&(a=a[0]),o=a,(a=a[0]).push(2,0,o),o=0):_===" "||_==="	"||_===`
`||_==="\r"?(p(),o=2):l+=_),o===3&&l==="!--"&&(o=4,a=a[0])}return p(),a}(t)),e),arguments,[])).length>1?e:e[0]}var q=Qe.bind(be),K,m,F,_e,G=0,He=[],M=[],oe=f.__b,re=f.__r,ce=f.diffed,le=f.__c,ie=f.unmount;function Ne(t,e){f.__h&&f.__h(m,t,G||e),G=0;var n=m.__H||(m.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:M}),n.__[t]}function se(t){return G=1,Ze(Ae,t)}function Ze(t,e,n){var _=Ne(K++,2);if(_.t=t,!_.__c&&(_.__=[n?n(e):Ae(void 0,e),function(u){var a=_.__N?_.__N[0]:_.__[0],p=_.t(a,u);a!==p&&(_.__N=[p,_.__[1]],_.__c.setState({}))}],_.__c=m,!m.u)){var c=function(u,a,p){if(!_.__c.__H)return!0;var r=_.__c.__H.__.filter(function(i){return i.__c});if(r.every(function(i){return!i.__N}))return!o||o.call(this,u,a,p);var h=!1;return r.forEach(function(i){if(i.__N){var s=i.__[0];i.__=i.__N,i.__N=void 0,s!==i.__[0]&&(h=!0)}}),!(!h&&_.__c.props===u)&&(!o||o.call(this,u,a,p))};m.u=!0;var o=m.shouldComponentUpdate,l=m.componentWillUpdate;m.componentWillUpdate=function(u,a,p){if(this.__e){var r=o;o=void 0,c(u,a,p),o=r}l&&l.call(this,u,a,p)},m.shouldComponentUpdate=c}return _.__N||_.__}function et(t,e){var n=Ne(K++,3);!f.__s&&_t(n.__H,e)&&(n.__=t,n.i=e,m.__H.__h.push(n))}function tt(){for(var t;t=He.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(U),t.__H.__h.forEach(j),t.__H.__h=[]}catch(e){t.__H.__h=[],f.__e(e,t.__v)}}f.__b=function(t){m=null,oe&&oe(t)},f.__r=function(t){re&&re(t),K=0;var e=(m=t.__c).__H;e&&(F===m?(e.__h=[],m.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=M,n.__N=n.i=void 0})):(e.__h.forEach(U),e.__h.forEach(j),e.__h=[])),F=m},f.diffed=function(t){ce&&ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(He.push(e)!==1&&_e===f.requestAnimationFrame||((_e=f.requestAnimationFrame)||nt)(tt)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==M&&(n.__=n.__V),n.i=void 0,n.__V=M})),F=m=null},f.__c=function(t,e){e.some(function(n){try{n.__h.forEach(U),n.__h=n.__h.filter(function(_){return!_.__||j(_)})}catch(_){e.some(function(c){c.__h&&(c.__h=[])}),e=[],f.__e(_,n.__v)}}),le&&le(t,e)},f.unmount=function(t){ie&&ie(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(_){try{U(_)}catch(c){e=c}}),n.__H=void 0,e&&f.__e(e,n.__v))};var ae=typeof requestAnimationFrame=="function";function nt(t){var e,n=function(){clearTimeout(_),ae&&cancelAnimationFrame(e),setTimeout(t)},_=setTimeout(n,100);ae&&(e=requestAnimationFrame(n))}function U(t){var e=m,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),m=e}function j(t){var e=m;t.__c=t.__(),m=e}function _t(t,e){return!t||t.length!==e.length||e.some(function(n,_){return n!==t[_]})}function Ae(t,e){return typeof e=="function"?e(t):e}console.info("chrome-ext template-react-ts content scrip");let k;Me().then(t=>{k=t});Ue.valueStream.subscribe(t=>{});const ot=t=>{console.log("handleButtonChange",t),t.dataset.chatGptWizard||je(t,()=>k&&k.prompt);const e=document.querySelector("form textarea");e.dataset.chatGptWizard||Ge(e,()=>k&&k.prompt)},ue={[pe]:ot,":not(button)":function(e){const n=_=>{var o;const c=(o=_==null?void 0:_.innerHTML)==null?void 0:o.includes(C);!_.dataset.chatGptWizard&&c&&(_.dataset.chatGptWizard="true",_.innerHTML=qe(_.innerHTML,C,C,""))};e.matches(Y)?n(e):e.querySelectorAll(Y).forEach(_=>{n(_)})}};function fe(t){for(const e in ue)t.matches(e)&&ue[e](t)}const rt=new MutationObserver(t=>{for(const e of t){if(e.type==="childList"){const n=Array.from(e.addedNodes),_=Array.from(e.removedNodes);n.concat(_).forEach(o=>{o.matches&&fe(o)})}e.type==="attributes"&&fe(e.target)}});rt.observe(document,{childList:!0,subtree:!0,attributes:!0});const ct=()=>{const[t,e]=se([]),[n,_]=se(k&&k.id);return et(()=>{Re().then(o=>{e(o)})},[]),q`
		<div class="chat-gpt-wizard--select-wrapper">
			<select onChange=${o=>{k=t.find(({id:u})=>u===o.target.value);const l=k&&k.id;l&&We(l),_(l)}} class="chat-gpt-wizard--select" name="cars" id="cars">
				<option value="" selected=${!n&&"selected"}></option>
				${t.map(({name:o,id:l})=>q`
					<option value="${l}" selected=${n===l&&"selected"}>${o}</option>`)}
			</select>
		</div>`};function lt(t){Je(q`
		<${ct}/>`,t)}async function Le(){const t=Oe(),e=Be(),n=de();if(!t&&e&&n){const _=n.parentElement.parentElement;_.style.flexDirection="column",_.parentElement.style.flexDirection="column",_.parentElement.style.gap="0px",_.parentElement.style.marginBottom="0.5em";const c=Ie();c.classList.add("chat-gpt-wizard"),_.appendChild(c),n.parentElement.style.flexDirection="row",lt(_)}}Le();const it=D();try{new MutationObserver(()=>{Le()}).observe(it,{childList:!0})}catch(t){console.info(`ChatGptWizard error --> Could not update UI:
`,t.stack)}
